<!doctype html>{% templatetag openblock %} load pipeline static {% templatetag closeblock %}
<html lang="pt-br">
<head>
  {% templatetag openblock %} block meta {% templatetag closeblock %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% templatetag openblock %} endblock meta {% templatetag closeblock %}

  <title>{% templatetag openblock %} block title {% templatetag closeblock %}Bem vindo{% templatetag openblock %} endblock title {% templatetag closeblock %}</title>

  <link rel="stylesheet" href="{% templatetag openblock %} static 'bootstrap/dist/css/bootstrap.css' {% templatetag closeblock %}">
  <link rel="stylesheet" href="{% templatetag openblock %} static 'bootstrap-vue/dist/bootstrap-vue.min.css' {% templatetag closeblock %}">
  <link rel="stylesheet" href="{% templatetag openblock %} static '@fortawesome/fontawesome-free/css/all.min.css' {% templatetag closeblock %}">

  {% templatetag openblock %} stylesheet 'base' {% templatetag closeblock %}

  {% templatetag openblock %} block styles {% templatetag closeblock %}{% templatetag openblock %} endblock styles {% templatetag closeblock %}
</head>
<body>
  {% templatetag openblock %} block body {% templatetag closeblock %}
    <div id="app" class="container mt-3">
      <validation-observer v-slot="form" ref="form">
        <b-form>
          <validation-provider v-slot="nome" rules="required" immediate>
            <b-form-group>
              <template slot="label">Nome <i class="fas fa-check-circle text-success" v-if="nome.valid"></i><i class="fas fa-times text-danger" v-if="nome.dirty && nome.invalid"></i></template>
              <b-form-input v-model="pessoa.nome" ref="nome"></b-form-input>
              <span class="text-danger">[[ nome.errors[0] ]]</span>
            </b-form-group>
          </validation-provider>

          <validation-provider v-slot="idade" rules="required|numeric|min-value:15" immediate>
            <b-form-group>
              <template slot="label">Idade <i class="fas fa-check-circle text-success" v-if="idade.valid"></i><i class="fas fa-times text-danger" v-if="idade.dirty && idade.invalid"></i></template>
              <b-form-input v-model="pessoa.idade"></b-form-input>
              <span class="text-danger">[[ idade.errors[0] ]]</span>
            </b-form-group>
          </validation-provider>

          <hr>
          <b-button variant="primary" @click="enviar" :disabled="form.invalid">Enviar</b-button>
        </b-form>
      </validation-observer>
    </div>
  {% templatetag openblock %} endblock body {% templatetag closeblock %}

  <script src="{% templatetag openblock %} static 'jquery/dist/jquery.min.js' {% templatetag closeblock %}"></script>
  <script src="{% templatetag openblock %} static 'axios/dist/axios.min.js' {% templatetag closeblock %}"></script>
  <script src="{% templatetag openblock %} static 'vue/dist/vue.min.js' {% templatetag closeblock %}"></script>
  <script src="{% templatetag openblock %} static 'bootstrap-vue/dist/bootstrap-vue.min.js' {% templatetag closeblock %}"></script>
  <script src="{% templatetag openblock %} static 'vee-validate/dist/vee-validate.full.min.js' {% templatetag closeblock %}"></script>

  {% templatetag openblock %} javascript 'app' {% templatetag closeblock %}

  {% templatetag openblock %} block scripts {% templatetag closeblock %}
    <script>
      new Vue({
        el: '#app',
        delimiters: ['[[', ']]'],
        data() {
          return {
            pessoa: {
              nome: '',
              idade: ''
            }
          }
        },
        methods: {
          enviar() {
            console.log(this.pessoa)
            this.reset()
            this.$nextTick(() => {
              this.$refs.form.reset()
              this.$refs.nome.focus()
            })
          },
          reset() {
            this.pessoa = {
              nome: '',
              idade: ''
            }
          }
        },
        mounted() {
          this.$nextTick(() => {
            this.$refs.nome.focus()
          })
        }
      })
    </script>
  {% templatetag openblock %} endblock scripts {% templatetag closeblock %}
</body>
</html>